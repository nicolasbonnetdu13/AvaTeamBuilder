plugins {
  id 'java'
  id 'application'
  id 'com.github.johnrengelman.shadow' version '1.2.4'
}

mainClassName = 'MainBot.java'

version '1.0'

sourceCompatibility = 1.8

repositories {
  jcenter()
}

dependencies {
  compile 'net.dv8tion:JDA:3.5.0_327'
  compile 'com.googlecode.json-simple:json-simple:1.1.1'
  compile 'com.github.jsimone:webapp-runner:8.5.11.3'
}

compileJava.options.encoding = 'UTF-8'

task stage() {
    dependsOn build, clean
}
build.mustRunAfter clean

task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.compile) {
        include "webapp-runner*"
    }
}

stage.dependsOn(copyToLib)